package oasys

import (
	"encoding/hex"
	"fmt"
	"math/big"
	"strconv"
	"strings"

	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/crypto"
	"github.com/ethereum/go-ethereum/log"
	"github.com/ethereum/go-ethereum/params"
)

const (
	// Address of initial wallet in genesis.
	mainnetGenesisWallet = "0xfc302c2252a69003b3f03750564393924d2c96ae"
	testnetGenesisWallet = "0x2929efbad86a7989879fc7650d1e30c02a488660"

	hexPrefix       = "0x"
	storageSlotSize = 64
)

var (
	GenesisHash  common.Hash
	otherNetwork = common.HexToHash("0x0")

	deploy1 = []deployable{
		&deployment{
			contract: wrappedOAS,
			// commit: https://github.com/oasysgames/oasys-genesis-contract/blob/b1dfd1f8440124e92a2d2fef0c45b8c930bfcecb/contracts/token/WOAS.sol
			code: "0x60806040526004361061009c5760003560e01c8063313ce56711610064578063313ce5671461021157806370a082311461023c57806395d89b411461026f578063a9059cbb14610284578063d0e30db01461009c578063dd62ed3e146102bd5761009c565b806306fdde03146100a6578063095ea7b31461013057806318160ddd1461017d57806323b872dd146101a45780632e1a7d4d146101e7575b6100a46102f8565b005b3480156100b257600080fd5b506100bb610347565b6040805160208082528351818301528351919283929083019185019080838360005b838110156100f55781810151838201526020016100dd565b50505050905090810190601f1680156101225780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561013c57600080fd5b506101696004803603604081101561015357600080fd5b506001600160a01b0381351690602001356103d5565b604080519115158252519081900360200190f35b34801561018957600080fd5b5061019261043b565b60408051918252519081900360200190f35b3480156101b057600080fd5b50610169600480360360608110156101c757600080fd5b506001600160a01b0381358116916020810135909116906040013561043f565b3480156101f357600080fd5b506100a46004803603602081101561020a57600080fd5b5035610573565b34801561021d57600080fd5b50610226610608565b6040805160ff9092168252519081900360200190f35b34801561024857600080fd5b506101926004803603602081101561025f57600080fd5b50356001600160a01b0316610611565b34801561027b57600080fd5b506100bb610623565b34801561029057600080fd5b50610169600480360360408110156102a757600080fd5b506001600160a01b03813516906020013561067d565b3480156102c957600080fd5b50610192600480360360408110156102e057600080fd5b506001600160a01b0381358116916020013516610691565b33600081815260036020908152604091829020805434908101909155825190815291517fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9281900390910190a2565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103cd5780601f106103a2576101008083540402835291602001916103cd565b820191906000526020600020905b8154815290600101906020018083116103b057829003601f168201915b505050505081565b3360008181526004602090815260408083206001600160a01b038716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b4790565b6001600160a01b03831660009081526003602052604081205482111561046457600080fd5b6001600160a01b03841633148015906104a257506001600160a01b038416600090815260046020908152604080832033845290915290205460001914155b15610502576001600160a01b03841660009081526004602090815260408083203384529091529020548211156104d757600080fd5b6001600160a01b03841660009081526004602090815260408083203384529091529020805483900390555b6001600160a01b03808516600081815260036020908152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35060019392505050565b3360009081526003602052604090205481111561058f57600080fd5b33600081815260036020526040808220805485900390555183156108fc0291849190818181858888f193505050501580156105ce573d6000803e3d6000fd5b5060408051828152905133917f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65919081900360200190a250565b60025460ff1681565b60036020526000908152604090205481565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103cd5780601f106103a2576101008083540402835291602001916103cd565b600061068a33848461043f565b9392505050565b60046020908152600092835260408084209091529082529020548156fea265627a7a72315820bd731225f74ea9b872e02bdda870f18bcb1d509f5aae2f97b88c09ffed87c5ee64736f6c63430005110032",
			storageMap: map[string]interface{}{
				// string public name
				"0x00": "Wrapped OAS",
				// string public symbol
				"0x01": "WOAS",
				// uint8 public decimals
				"0x02": big.NewInt(18),
			},
		},
		&deployment{
			contract: stakableOAS,
			// commit: https://github.com/oasysgames/oasys-genesis-contract/blob/b1dfd1f8440124e92a2d2fef0c45b8c930bfcecb/contracts/token/SOAS.sol
			code: "0x6080604052600436106100fe5760003560e01c806339509351116100955780637de6b1db116100645780637de6b1db1461030257806395d89b4114610322578063a457c2d714610337578063a9059cbb14610357578063dd62ed3e1461037757600080fd5b806339509351146102545780634cf088d9146102745780636dec93f1146102ac57806370a08231146102cc57600080fd5b806318160ddd116100d157806318160ddd146101d957806323b872dd146101f8578063313ce56714610218578063379607f51461023457600080fd5b806306fdde03146101035780630835fe471461012e578063095ea7b314610194578063156e29f6146101c4575b600080fd5b34801561010f57600080fd5b506101186103bd565b6040516101259190611224565b60405180910390f35b34801561013a57600080fd5b5061014e610149366004611273565b61044f565b6040516101259190815181526020808301519082015260408083015190820152606080830151908201526080918201516001600160a01b03169181019190915260a00190565b3480156101a057600080fd5b506101b46101af36600461128e565b6104e7565b6040519015158152602001610125565b6101d76101d23660046112b8565b6104ff565b005b3480156101e557600080fd5b506002545b604051908152602001610125565b34801561020457600080fd5b506101b46102133660046112eb565b6106a9565b34801561022457600080fd5b5060405160128152602001610125565b34801561024057600080fd5b506101d761024f366004611327565b6106cd565b34801561026057600080fd5b506101b461026f36600461128e565b610849565b34801561028057600080fd5b50600554610294906001600160a01b031681565b6040516001600160a01b039091168152602001610125565b3480156102b857600080fd5b506101ea6102c7366004611273565b610888565b3480156102d857600080fd5b506101ea6102e7366004611273565b6001600160a01b031660009081526020819052604090205490565b34801561030e57600080fd5b506101d761031d366004611327565b61095a565b34801561032e57600080fd5b50610118610aec565b34801561034357600080fd5b506101b461035236600461128e565b610afb565b34801561036357600080fd5b506101b461037236600461128e565b610b8d565b34801561038357600080fd5b506101ea610392366004611340565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b6060600380546103cc90611373565b80601f01602080910402602001604051908101604052809291908181526020018280546103f890611373565b80156104455780601f1061041a57610100808354040283529160200191610445565b820191906000526020600020905b81548152906001019060200180831161042857829003601f168201915b5050505050905090565b61048a6040518060a001604052806000815260200160008152602001600081526020016000815260200160006001600160a01b031681525090565b506001600160a01b03908116600090815260066020908152604091829020825160a0810184528154815260018201549281019290925260028101549282019290925260038201546060820152600490910154909116608082015290565b6000336104f5818585610b9b565b5060019392505050565b6001600160a01b038316600090815260066020526040902054156105595760405162461bcd60e51b815260206004820152600c60248201526b185b1c9958591e481b5a5b9d60a21b60448201526064015b60405180910390fd5b814210801561056757508082105b6105ac5760405162461bcd60e51b81526020600482015260166024820152751a5b9d985b1a59081cda5b98d9481bdc881d5b9d1a5b60521b6044820152606401610550565b600034116105e55760405162461bcd60e51b81526020600482015260066024820152656e6f204f415360d01b6044820152606401610550565b6105ef8334610cc0565b6040805160a0810182523480825260006020808401828152848601888152606080870189815233608089019081526001600160a01b038d811680895260068852978b902099518a55945160018a0155925160028901555160038801559051600490960180546001600160a01b03191696909216959095179055845192835282018690529281018490527fb4c03061fb5b7fed76389d5af8f2e0ddb09f8c70d1333abbb62582835e10accb91015b60405180910390a2505050565b6000336106b7858285610dab565b6106c2858585610e3d565b506001949350505050565b3360008181526006602052604081206001015490916106eb90610888565b6106f591906113c4565b90508181101561073c5760405162461bcd60e51b81526020600482015260126024820152716f76657220636c61696d61626c65204f415360701b6044820152606401610550565b6107463383611016565b604080516000808252602082019092523390849060405161076791906113db565b60006040518083038185875af1925050503d80600081146107a4576040519150601f19603f3d011682016040523d82523d6000602084013e6107a9565b606091505b50509050806107f05760405162461bcd60e51b815260206004820152601360248201527213d054c81d1c985b9cd9995c8819985a5b1959606a1b6044820152606401610550565b33600090815260066020526040812060010180548592906108129084906113f7565b909155505060405183815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200161069c565b3360008181526001602090815260408083206001600160a01b03871684529091528120549091906104f590829086906108839087906113f7565b610b9b565b6001600160a01b038082166000908152600660209081526040808320815160a0810183528154808252600183015494820194909452600282015492810192909252600381015460608301526004015490931660808401529091906108ef5750600092915050565b80604001514210156109045750600092915050565b60008160400151826060015161091a91906113c4565b604083015161092990426113c4565b8351610935919061140f565b61093f919061142e565b825190915081111561095357505192915050565b9392505050565b33600090815260066020908152604091829020825160a08101845281548082526001830154938201849052600283015494820194909452600382015460608201526004909101546001600160a01b031660808201529183916109bb916113c4565b10156109fb5760405162461bcd60e51b815260206004820152600f60248201526e63616e6e6f742072656e6f756e636560881b6044820152606401610550565b610a053383611016565b60808101516040805160008082526020820192839052926001600160a01b0316918591610a31916113db565b60006040518083038185875af1925050503d8060008114610a6e576040519150601f19603f3d011682016040523d82523d6000602084013e610a73565b606091505b5050905080610aba5760405162461bcd60e51b815260206004820152601360248201527213d054c81d1c985b9cd9995c8819985a5b1959606a1b6044820152606401610550565b60405183815233907f443630e54cc5dd8826c25d7467193a3b7a0a67b4ed73c14fb477e8e7eed3fd489060200161069c565b6060600480546103cc90611373565b3360008181526001602090815260408083206001600160a01b038716845290915281205490919083811015610b805760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b6064820152608401610550565b6106c28286868403610b9b565b6000336104f5818585610e3d565b6001600160a01b038316610bfd5760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b6064820152608401610550565b6001600160a01b038216610c5e5760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b6064820152608401610550565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b6001600160a01b038216610d165760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606401610550565b610d226000838361116d565b8060026000828254610d3491906113f7565b90915550506001600160a01b03821660009081526020819052604081208054839290610d619084906113f7565b90915550506040518181526001600160a01b038316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b6001600160a01b038381166000908152600160209081526040808320938616835292905220546000198114610e375781811015610e2a5760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152606401610550565b610e378484848403610b9b565b50505050565b6001600160a01b038316610ea15760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b6064820152608401610550565b6001600160a01b038216610f035760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b6064820152608401610550565b610f0e83838361116d565b6001600160a01b03831660009081526020819052604090205481811015610f865760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b6064820152608401610550565b6001600160a01b03808516600090815260208190526040808220858503905591851681529081208054849290610fbd9084906113f7565b92505081905550826001600160a01b0316846001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8460405161100991815260200190565b60405180910390a3610e37565b6001600160a01b0382166110765760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608401610550565b6110828260008361116d565b6001600160a01b038216600090815260208190526040902054818110156110f65760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608401610550565b6001600160a01b03831660009081526020819052604081208383039055600280548492906111259084906113c4565b90915550506040518281526000906001600160a01b038516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90602001610cb3565b505050565b6001600160a01b038316158061118a57506001600160a01b038216155b806111a257506005546001600160a01b038481169116145b806111ba57506005546001600160a01b038381169116145b6111685760405162461bcd60e51b815260206004820152600f60248201526e31b0b73737ba103a3930b739b332b960891b6044820152606401610550565b60005b838110156112135781810151838201526020016111fb565b83811115610e375750506000910152565b60208152600082518060208401526112438160408501602087016111f8565b601f01601f19169190910160400192915050565b80356001600160a01b038116811461126e57600080fd5b919050565b60006020828403121561128557600080fd5b61095382611257565b600080604083850312156112a157600080fd5b6112aa83611257565b946020939093013593505050565b6000806000606084860312156112cd57600080fd5b6112d684611257565b95602085013595506040909401359392505050565b60008060006060848603121561130057600080fd5b61130984611257565b925061131760208501611257565b9150604084013590509250925092565b60006020828403121561133957600080fd5b5035919050565b6000806040838503121561135357600080fd5b61135c83611257565b915061136a60208401611257565b90509250929050565b600181811c9082168061138757607f821691505b602082108114156113a857634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052601160045260246000fd5b6000828210156113d6576113d66113ae565b500390565b600082516113ed8184602087016111f8565b9190910192915050565b6000821982111561140a5761140a6113ae565b500190565b6000816000190483118215151615611429576114296113ae565b500290565b60008261144b57634e487b7160e01b600052601260045260246000fd5b50049056fea2646970667358221220f7ddb32fc77b27c237098061d15b7cf74a4c576b676a29f9c61d605ffb05c99d64736f6c63430008090033",
			storageMap: map[string]interface{}{
				// string public name
				"0x03": "Stakable OAS",
				// string public symbol
				"0x04": "SOAS",
				// address public staking
				"0x05": "0x0000000000000000000000000000000000001001",
			},
		},
		&deployment{
			contract: verifierInfo,
			// commit: https://github.com/oasysgames/oasys-optimism/blob/28313096a0cc758c3d4fbdc29a2078a5ef78cb70/packages/contracts/contracts/oasys/L1/rollup/VerifierInfo.sol
			code: "0x608060405234801561001057600080fd5b50600436106100675760003560e01c8063b166493b11610050578063b166493b146100b6578063ceb35b0f146100cb578063ee91afab146100de57600080fd5b806339b64c301461006c5780638e75454f14610095575b600080fd5b61007f61007a366004610981565b610114565b60405161008c91906109be565b60405180910390f35b6100a86100a3366004610981565b61019d565b60405190815260200161008c565b6100c96100c4366004610a41565b6101ae565b005b6100c96100d9366004610a41565b610580565b6100a86100ec366004610a8f565b73ffffffffffffffffffffffffffffffffffffffff1660009081526001602052604090205490565b6060600080610122846107f3565b815260200190815260200160002080548060200260200160405190810160405280929190818152602001828054801561019157602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff168152600190910190602001808311610166575b50505050509050919050565b60006101a8826107f3565b92915050565b60006101b9836107f3565b73ffffffffffffffffffffffffffffffffffffffff8316600090815260016020526040902054909150811461024f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f6e616d65206e6f74206d6174636865640000000000000000000000000000000060448201526064015b60405180910390fd5b60008181526020818152604091829020805483518184028101840190945280845290926102cb92909184918301828280156102c057602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff168152600190910190602001808311610295575b505050505033610823565b610357576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f6f6e6c792074686520636f6e7461696e6564206164647265737320697320616c60448201527f6c6f7765640000000000000000000000000000000000000000000000000000006064820152608401610246565b80546000805b610368600184610ae0565b81101561048957811580156103c557508573ffffffffffffffffffffffffffffffffffffffff168482815481106103a1576103a1610af7565b60009182526020909120015473ffffffffffffffffffffffffffffffffffffffff16145b156103cf57600191505b811561047757836103e1826001610b26565b815481106103f1576103f1610af7565b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684828154811061042e5761042e610af7565b9060005260206000200160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b8061048181610b3e565b91505061035d565b508280548061049a5761049a610b77565b6000828152602080822083017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff90810180547fffffffffffffffffffffffff000000000000000000000000000000000000000016905590920190925573ffffffffffffffffffffffffffffffffffffffff871682526001905260408082209190915551610528908790610ba6565b60405190819003812073ffffffffffffffffffffffffffffffffffffffff87168252907fb61aa53b7041e92eacd606b1a9ff859f60ab78c4dd8639a87c114d2ba8d036489060200160405180910390a2505050505050565b73ffffffffffffffffffffffffffffffffffffffff81166000908152600160205260409020541561060d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600d60248201527f616c7265616479206164646564000000000000000000000000000000000000006044820152606401610246565b6000610618836107f3565b600081815260208190526040902080549192509015806106a157506106a1818054806020026020016040519081016040528092919081815260200182805480156102c05760200282019190600052602060002090815473ffffffffffffffffffffffffffffffffffffffff16815260019091019060200180831161029557505050505033610823565b61072d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f6f6e6c792074686520636f6e7461696e6564206164647265737320697320616c60448201527f6c6f7765640000000000000000000000000000000000000000000000000000006064820152608401610246565b8054600180820183556000838152602080822090930180547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff8816908117909155815291526040908190208390555161079d908590610ba6565b60405190819003812073ffffffffffffffffffffffffffffffffffffffff85168252907fd2754bb25f80d82f28983daef636e09dd633511ed87d9a247d9982c495912dd39060200160405180910390a250505050565b6000816040516020016108069190610ba6565b604051602081830303815290604052805190602001209050919050565b8151600090815b8181101561089c578373ffffffffffffffffffffffffffffffffffffffff1685828151811061085b5761085b610af7565b602002602001015173ffffffffffffffffffffffffffffffffffffffff16141561088a576001925050506101a8565b8061089481610b3e565b91505061082a565b506000949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f8301126108e757600080fd5b813567ffffffffffffffff80821115610902576109026108a7565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610948576109486108a7565b8160405283815286602085880101111561096157600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561099357600080fd5b813567ffffffffffffffff8111156109aa57600080fd5b6109b6848285016108d6565b949350505050565b6020808252825182820181905260009190848201906040850190845b81811015610a0c57835173ffffffffffffffffffffffffffffffffffffffff16835292840192918401916001016109da565b50909695505050505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610a3c57600080fd5b919050565b60008060408385031215610a5457600080fd5b823567ffffffffffffffff811115610a6b57600080fd5b610a77858286016108d6565b925050610a8660208401610a18565b90509250929050565b600060208284031215610aa157600080fd5b610aaa82610a18565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600082821015610af257610af2610ab1565b500390565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60008219821115610b3957610b39610ab1565b500190565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610b7057610b70610ab1565b5060010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b6000825160005b81811015610bc75760208186018101518583015201610bad565b81811115610bd6576000828501525b50919091019291505056fea2646970667358221220067070cdaa99c2faf22be35b9a67bd1f54995b2ce7aab0faa1f074d706c1e31464736f6c63430008090033",
		},
		&deployment{
			contract: l1StandardERC20Factory,
			// commit: https://github.com/oasysgames/oasys-optimism/blob/28313096a0cc758c3d4fbdc29a2078a5ef78cb70/packages/contracts/contracts/oasys/L1/token/L1StandardERC20Factory.sol
			code: "0x608060405234801561001057600080fd5b506004361061002b5760003560e01c80630b6ec17814610030575b600080fd5b61004361003e3660046101c0565b610045565b005b60008282604051610055906100d9565b61006092919061029e565b604051809103906000f08015801561007c573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff16826040516100a491906102cc565b604051908190038120907fd714a43f627528ad95fc3dcf6c453cf595be2f4d75c58c4273f17208ed899f4490600090a3505050565b612417806102e983390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f83011261012657600080fd5b813567ffffffffffffffff80821115610141576101416100e6565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610187576101876100e6565b816040528381528660208588010111156101a057600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080604083850312156101d357600080fd5b823567ffffffffffffffff808211156101eb57600080fd5b6101f786838701610115565b9350602085013591508082111561020d57600080fd5b5061021a85828601610115565b9150509250929050565b60005b8381101561023f578181015183820152602001610227565b8381111561024e576000848401525b50505050565b6000815180845261026c816020860160208601610224565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b6040815260006102b16040830185610254565b82810360208401526102c38185610254565b95945050505050565b600082516102de818460208701610224565b919091019291505056fe60806040523480156200001157600080fd5b5060405162002417380380620024178339810160408190526200003491620003ba565b8181818181600590805190602001906200005092919062000247565b5080516200006690600690602084019062000247565b50506007805460ff191690555062000080600033620000e2565b620000ac7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a633620000e2565b620000d87f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a33620000e2565b5050505062000461565b620000f982826200012560201b62000abd1760201c565b60008281526001602090815260409091206200012091839062000ac762000135821b17901c565b505050565b62000131828262000155565b5050565b60006200014c836001600160a01b038416620001f5565b90505b92915050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff1662000131576000828152602081815260408083206001600160a01b03851684529091529020805460ff19166001179055620001b13390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b60008181526001830160205260408120546200023e575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556200014f565b5060006200014f565b828054620002559062000424565b90600052602060002090601f016020900481019282620002795760008555620002c4565b82601f106200029457805160ff1916838001178555620002c4565b82800160010185558215620002c4579182015b82811115620002c4578251825591602001919060010190620002a7565b50620002d2929150620002d6565b5090565b5b80821115620002d25760008155600101620002d7565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200031557600080fd5b81516001600160401b0380821115620003325762000332620002ed565b604051601f8301601f19908116603f011681019082821181831017156200035d576200035d620002ed565b816040528381526020925086838588010111156200037a57600080fd5b600091505b838210156200039e57858201830151818301840152908201906200037f565b83821115620003b05760008385830101525b9695505050505050565b60008060408385031215620003ce57600080fd5b82516001600160401b0380821115620003e657600080fd5b620003f48683870162000303565b935060208501519150808211156200040b57600080fd5b506200041a8582860162000303565b9150509250929050565b600181811c908216806200043957607f821691505b602082108114156200045b57634e487b7160e01b600052602260045260246000fd5b50919050565b611fa680620004716000396000f3fe608060405234801561001057600080fd5b50600436106101c45760003560e01c806370a08231116100f9578063a457c2d711610097578063d539139311610071578063d5391393146103fa578063d547741f14610421578063dd62ed3e14610434578063e63ab1e91461047a57600080fd5b8063a457c2d7146103c1578063a9059cbb146103d4578063ca15c873146103e757600080fd5b80639010d07c116100d35780639010d07c1461033557806391d148541461036d57806395d89b41146103b1578063a217fddf146103b957600080fd5b806370a08231146102e457806379cc67901461031a5780638456cb591461032d57600080fd5b8063313ce567116101665780633f4ba83a116101405780633f4ba83a146102ab57806340c10f19146102b357806342966c68146102c65780635c975abb146102d957600080fd5b8063313ce5671461027657806336568abe14610285578063395093511461029857600080fd5b806318160ddd116101a257806318160ddd1461021957806323b872dd1461022b578063248a9ca31461023e5780632f2ff15d1461026157600080fd5b806301ffc9a7146101c957806306fdde03146101f1578063095ea7b314610206575b600080fd5b6101dc6101d7366004611b44565b6104a1565b60405190151581526020015b60405180910390f35b6101f96104fd565b6040516101e89190611bb2565b6101dc610214366004611c2c565b61058f565b6004545b6040519081526020016101e8565b6101dc610239366004611c56565b6105a5565b61021d61024c366004611c92565b60009081526020819052604090206001015490565b61027461026f366004611cab565b610676565b005b604051601281526020016101e8565b610274610293366004611cab565b61069d565b6101dc6102a6366004611c2c565b6106bf565b610274610708565b6102746102c1366004611c2c565b6107ae565b6102746102d4366004611c92565b610858565b60075460ff166101dc565b61021d6102f2366004611cd7565b73ffffffffffffffffffffffffffffffffffffffff1660009081526002602052604090205490565b610274610328366004611c2c565b610865565b6102746108ff565b610348610343366004611cf2565b6109a3565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016101e8565b6101dc61037b366004611cab565b60009182526020828152604080842073ffffffffffffffffffffffffffffffffffffffff93909316845291905290205460ff1690565b6101f96109c2565b61021d600081565b6101dc6103cf366004611c2c565b6109d1565b6101dc6103e2366004611c2c565b610a8f565b61021d6103f5366004611c92565b610a9c565b61021d7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a681565b61027461042f366004611cab565b610ab3565b61021d610442366004611d14565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260036020908152604080832093909416825291909152205490565b61021d7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a81565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f5a05180f0000000000000000000000000000000000000000000000000000000014806104f757506104f782610ae9565b92915050565b60606005805461050c90611d3e565b80601f016020809104026020016040519081016040528092919081815260200182805461053890611d3e565b80156105855780601f1061055a57610100808354040283529160200191610585565b820191906000526020600020905b81548152906001019060200180831161056857829003601f168201915b5050505050905090565b600061059c338484610b80565b50600192915050565b60006105b2848484610cff565b73ffffffffffffffffffffffffffffffffffffffff841660009081526003602090815260408083203384529091529020548281101561065e5760405162461bcd60e51b815260206004820152602860248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206160448201527f6c6c6f77616e636500000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b61066b8533858403610b80565b506001949350505050565b6106808282610f71565b60008281526001602052604090206106989082610ac7565b505050565b6106a78282610f97565b6000828152600160205260409020610698908261102c565b33600081815260036020908152604080832073ffffffffffffffffffffffffffffffffffffffff87168452909152812054909161059c918590610703908690611dc1565b610b80565b6107327f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a3361037b565b6107a45760405162461bcd60e51b815260206004820152603960248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f76652070617573657220726f6c6520746f20756e7061757365000000000000006064820152608401610655565b6107ac61104e565b565b6107d87f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a63361037b565b61084a5760405162461bcd60e51b815260206004820152603660248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f7665206d696e74657220726f6c6520746f206d696e74000000000000000000006064820152608401610655565b6108548282611115565b5050565b6108623382611227565b50565b60006108718333610442565b9050818110156108e85760405162461bcd60e51b8152602060048201526024808201527f45524332303a206275726e20616d6f756e74206578636565647320616c6c6f7760448201527f616e6365000000000000000000000000000000000000000000000000000000006064820152608401610655565b6108f58333848403610b80565b6106988383611227565b6109297f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a3361037b565b61099b5760405162461bcd60e51b815260206004820152603760248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f76652070617573657220726f6c6520746f2070617573650000000000000000006064820152608401610655565b6107ac6113ec565b60008281526001602052604081206109bb9083611492565b9392505050565b60606006805461050c90611d3e565b33600090815260036020908152604080832073ffffffffffffffffffffffffffffffffffffffff8616845290915281205482811015610a785760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f0000000000000000000000000000000000000000000000000000006064820152608401610655565b610a853385858403610b80565b5060019392505050565b600061059c338484610cff565b60008181526001602052604081206104f79061149e565b6106a782826114a8565b61085482826114ce565b60006109bb8373ffffffffffffffffffffffffffffffffffffffff84166115be565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806104f757507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316146104f7565b73ffffffffffffffffffffffffffffffffffffffff8316610c085760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f72657373000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff8216610c915760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f73730000000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff83811660008181526003602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b73ffffffffffffffffffffffffffffffffffffffff8316610d885760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f64726573730000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff8216610e115760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f65737300000000000000000000000000000000000000000000000000000000006064820152608401610655565b610e1c83838361160d565b73ffffffffffffffffffffffffffffffffffffffff831660009081526002602052604090205481811015610eb85760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e636500000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff808516600090815260026020526040808220858503905591851681529081208054849290610efc908490611dc1565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610f6291815260200190565b60405180910390a35b50505050565b600082815260208190526040902060010154610f8d8133611618565b61069883836114ce565b73ffffffffffffffffffffffffffffffffffffffff811633146110225760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201527f20726f6c657320666f722073656c6600000000000000000000000000000000006064820152608401610655565b61085482826116ce565b60006109bb8373ffffffffffffffffffffffffffffffffffffffff8416611785565b60075460ff166110a05760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f74207061757365640000000000000000000000006044820152606401610655565b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390a1565b73ffffffffffffffffffffffffffffffffffffffff82166111785760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606401610655565b6111846000838361160d565b80600460008282546111969190611dc1565b909155505073ffffffffffffffffffffffffffffffffffffffff8216600090815260026020526040812080548392906111d0908490611dc1565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff82166112b05760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f73000000000000000000000000000000000000000000000000000000000000006064820152608401610655565b6112bc8260008361160d565b73ffffffffffffffffffffffffffffffffffffffff8216600090815260026020526040902054818110156113585760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f63650000000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600260205260408120838303905560048054849290611394908490611dd9565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a3505050565b60075460ff161561143f5760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a20706175736564000000000000000000000000000000006044820152606401610655565b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586110eb3390565b60006109bb8383611878565b60006104f7825490565b6000828152602081905260409020600101546114c48133611618565b61069883836116ce565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff166108545760008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff85168452909152902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790556115603390565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054611605575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556104f7565b5060006104f7565b6106988383836118a2565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff166108545761166e8173ffffffffffffffffffffffffffffffffffffffff16601461191b565b61167983602061191b565b60405160200161168a929190611df0565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529082905262461bcd60e51b825261065591600401611bb2565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff16156108545760008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516808552925280832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b6000818152600183016020526040812054801561186e5760006117a9600183611dd9565b85549091506000906117bd90600190611dd9565b90508181146118225760008660000182815481106117dd576117dd611e71565b906000526020600020015490508087600001848154811061180057611800611e71565b6000918252602080832090910192909255918252600188019052604090208390555b855486908061183357611833611ea0565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506104f7565b60009150506104f7565b600082600001828154811061188f5761188f611e71565b9060005260206000200154905092915050565b60075460ff16156106985760405162461bcd60e51b815260206004820152602a60248201527f45524332305061757361626c653a20746f6b656e207472616e7366657220776860448201527f696c6520706175736564000000000000000000000000000000000000000000006064820152608401610655565b6060600061192a836002611ecf565b611935906002611dc1565b67ffffffffffffffff81111561194d5761194d611f0c565b6040519080825280601f01601f191660200182016040528015611977576020820181803683370190505b5090507f3000000000000000000000000000000000000000000000000000000000000000816000815181106119ae576119ae611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f780000000000000000000000000000000000000000000000000000000000000081600181518110611a1157611a11611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053506000611a4d846002611ecf565b611a58906001611dc1565b90505b6001811115611af5577f303132333435363738396162636465660000000000000000000000000000000085600f1660108110611a9957611a99611e71565b1a60f81b828281518110611aaf57611aaf611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060049490941c93611aee81611f3b565b9050611a5b565b5083156109bb5760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e746044820152606401610655565b600060208284031215611b5657600080fd5b81357fffffffff00000000000000000000000000000000000000000000000000000000811681146109bb57600080fd5b60005b83811015611ba1578181015183820152602001611b89565b83811115610f6b5750506000910152565b6020815260008251806020840152611bd1816040850160208701611b86565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b803573ffffffffffffffffffffffffffffffffffffffff81168114611c2757600080fd5b919050565b60008060408385031215611c3f57600080fd5b611c4883611c03565b946020939093013593505050565b600080600060608486031215611c6b57600080fd5b611c7484611c03565b9250611c8260208501611c03565b9150604084013590509250925092565b600060208284031215611ca457600080fd5b5035919050565b60008060408385031215611cbe57600080fd5b82359150611cce60208401611c03565b90509250929050565b600060208284031215611ce957600080fd5b6109bb82611c03565b60008060408385031215611d0557600080fd5b50508035926020909101359150565b60008060408385031215611d2757600080fd5b611d3083611c03565b9150611cce60208401611c03565b600181811c90821680611d5257607f821691505b60208210811415611d8c577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008219821115611dd457611dd4611d92565b500190565b600082821015611deb57611deb611d92565b500390565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000815260008351611e28816017850160208801611b86565b7f206973206d697373696e6720726f6c65200000000000000000000000000000006017918401918201528351611e65816028840160208801611b86565b01602801949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615611f0757611f07611d92565b500290565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600081611f4a57611f4a611d92565b507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019056fea2646970667358221220103a44af35ac58f5a48c8f72f99b10f874b4353c1872505ff24244aba31bd1e264736f6c63430008090033a264697066735822122097c4f735eb5349256aee8534f43d367557ae3ce91a4f0b0b2f74d3073ea656d264736f6c63430008090033",
		},
		&deployment{
			contract: l1StandardERC721Factory,
			// commit: https://github.com/oasysgames/oasys-optimism/blob/69cf52cf04df0e825f475b73a89af898a2781f59/packages/contracts/contracts/oasys/L1/token/L1StandardERC721Factory.sol
			code: "0x608060405234801561001057600080fd5b506004361061002b5760003560e01c8063c4af445814610030575b600080fd5b61004361003e3660046101c6565b610045565b005b600083838333604051610057906100de565b61006494939291906102c8565b604051809103906000f080158015610080573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff16836040516100a89190610329565b604051908190038120907fbda470470721b5a2c56d61dc0aa9496dd02d39170f9dff803c35efbab673652290600090a350505050565b61316f806200034683390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f83011261012c57600080fd5b813567ffffffffffffffff80821115610147576101476100ec565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561018d5761018d6100ec565b816040528381528660208588010111156101a657600080fd5b836020870160208301376000602085830101528094505050505092915050565b6000806000606084860312156101db57600080fd5b833567ffffffffffffffff808211156101f357600080fd5b6101ff8783880161011b565b9450602086013591508082111561021557600080fd5b6102218783880161011b565b9350604086013591508082111561023757600080fd5b506102448682870161011b565b9150509250925092565b60005b83811015610269578181015183820152602001610251565b83811115610278576000848401525b50505050565b6000815180845261029681602086016020860161024e565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b6080815260006102db608083018761027e565b82810360208401526102ed818761027e565b90508281036040840152610301818661027e565b91505073ffffffffffffffffffffffffffffffffffffffff8316606083015295945050505050565b6000825161033b81846020870161024e565b919091019291505056fe60806040523480156200001157600080fd5b506040516200316f3803806200316f8339810160408190526200003491620003cd565b8351849084906200004d9060029060208501906200025a565b508051620000639060039060208401906200025a565b5050600c805460ff191690555081516200008590600d9060208501906200025a565b5062000093600082620000f5565b620000bf7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a682620000f5565b620000eb7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a82620000f5565b50505050620004bd565b6200010c82826200013860201b62000fb91760201c565b60008281526001602090815260409091206200013391839062000fc362000148821b17901c565b505050565b62000144828262000168565b5050565b60006200015f836001600160a01b03841662000208565b90505b92915050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff1662000144576000828152602081815260408083206001600160a01b03851684529091529020805460ff19166001179055620001c43390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054620002515750815460018181018455600084815260208082209093018490558454848252828601909352604090209190915562000162565b50600062000162565b828054620002689062000480565b90600052602060002090601f0160209004810192826200028c5760008555620002d7565b82601f10620002a757805160ff1916838001178555620002d7565b82800160010185558215620002d7579182015b82811115620002d7578251825591602001919060010190620002ba565b50620002e5929150620002e9565b5090565b5b80821115620002e55760008155600101620002ea565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200032857600080fd5b81516001600160401b038082111562000345576200034562000300565b604051601f8301601f19908116603f0116810190828211818310171562000370576200037062000300565b816040528381526020925086838588010111156200038d57600080fd5b600091505b83821015620003b1578582018301518183018401529082019062000392565b83821115620003c35760008385830101525b9695505050505050565b60008060008060808587031215620003e457600080fd5b84516001600160401b0380821115620003fc57600080fd5b6200040a8883890162000316565b955060208701519150808211156200042157600080fd5b6200042f8883890162000316565b945060408701519150808211156200044657600080fd5b50620004558782880162000316565b606087015190935090506001600160a01b03811681146200047557600080fd5b939692955090935050565b600181811c908216806200049557607f821691505b60208210811415620004b757634e487b7160e01b600052602260045260246000fd5b50919050565b612ca280620004cd6000396000f3fe608060405234801561001057600080fd5b50600436106101e55760003560e01c80636352211e1161010f578063b88d4fde116100a2578063d539139311610071578063d53913931461041b578063d547741f14610442578063e63ab1e914610455578063e985e9c51461047c57600080fd5b8063b88d4fde146103cf578063c87b56dd146103e2578063ca15c873146103f5578063d35e29d71461040857600080fd5b806391d14854116100de57806391d148541461037557806395d89b41146103ac578063a217fddf146103b4578063a22cb465146103bc57600080fd5b80636352211e1461033457806370a08231146103475780638456cb591461035a5780639010d07c1461036257600080fd5b80632f2ff15d1161018757806342842e0e1161015657806342842e0e146102f057806342966c68146103035780634f6ccce7146103165780635c975abb1461032957600080fd5b80632f2ff15d146102af5780632f745c59146102c257806336568abe146102d55780633f4ba83a146102e857600080fd5b8063095ea7b3116101c3578063095ea7b31461025257806318160ddd1461026757806323b872dd14610279578063248a9ca31461028c57600080fd5b806301ffc9a7146101ea57806306fdde0314610212578063081812fc14610227575b600080fd5b6101fd6101f83660046125e3565b6104b8565b60405190151581526020015b60405180910390f35b61021a6104c9565b6040516102099190612676565b61023a610235366004612689565b61055b565b6040516001600160a01b039091168152602001610209565b6102656102603660046126be565b610606565b005b600a545b604051908152602001610209565b6102656102873660046126e8565b610738565b61026b61029a366004612689565b60009081526020819052604090206001015490565b6102656102bd366004612724565b6107c0565b61026b6102d03660046126be565b6107e2565b6102656102e3366004612724565b61088a565b6102656108ac565b6102656102fe3660046126e8565b610952565b610265610311366004612689565b61096d565b61026b610324366004612689565b6109f4565b600c5460ff166101fd565b61023a610342366004612689565b610a98565b61026b610355366004612750565b610b23565b610265610bbd565b61023a61037036600461276b565b610c61565b6101fd610383366004612724565b6000918252602082815260408084206001600160a01b0393909316845291905290205460ff1690565b61021a610c80565b61026b600081565b6102656103ca36600461278d565b610c8f565b6102656103dd3660046127f8565b610d72565b61021a6103f0366004612689565b610e00565b61026b610403366004612689565b610ee8565b6102656104163660046128f2565b610eff565b61026b7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a681565b610265610450366004612724565b610faf565b61026b7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a81565b6101fd61048a366004612927565b6001600160a01b03918216600090815260076020908152604080832093909416825291909152205460ff1690565b60006104c382610fd8565b92915050565b6060600280546104d890612951565b80601f016020809104026020016040519081016040528092919081815260200182805461050490612951565b80156105515780601f1061052657610100808354040283529160200191610551565b820191906000526020600020905b81548152906001019060200180831161053457829003601f168201915b5050505050905090565b6000818152600460205260408120546001600160a01b03166105ea5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860448201527f697374656e7420746f6b656e000000000000000000000000000000000000000060648201526084015b60405180910390fd5b506000908152600660205260409020546001600160a01b031690565b600061061182610a98565b9050806001600160a01b0316836001600160a01b0316141561069b5760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560448201527f720000000000000000000000000000000000000000000000000000000000000060648201526084016105e1565b336001600160a01b03821614806106b757506106b7813361048a565b6107295760405162461bcd60e51b815260206004820152603860248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f76656420666f7220616c6c000000000000000060648201526084016105e1565b610733838361102e565b505050565b610743335b826110b4565b6107b55760405162461bcd60e51b815260206004820152603160248201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60448201527f776e6572206e6f7220617070726f76656400000000000000000000000000000060648201526084016105e1565b6107338383836111bc565b6107ca82826113ac565b60008281526001602052604090206107339082610fc3565b60006107ed83610b23565b82106108615760405162461bcd60e51b815260206004820152602b60248201527f455243373231456e756d657261626c653a206f776e657220696e646578206f7560448201527f74206f6620626f756e647300000000000000000000000000000000000000000060648201526084016105e1565b506001600160a01b03919091166000908152600860209081526040808320938352929052205490565b61089482826113d2565b6000828152600160205260409020610733908261145a565b6108d67f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a33610383565b6109485760405162461bcd60e51b815260206004820152603260248201527f4c315374616e646172644552433732313a206d7573742068617665207061757360448201527f657220726f6c6520746f20756e7061757365000000000000000000000000000060648201526084016105e1565b61095061146f565b565b61073383838360405180602001604052806000815250610d72565b6109763361073d565b6109e85760405162461bcd60e51b815260206004820152603060248201527f4552433732314275726e61626c653a2063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f7665640000000000000000000000000000000060648201526084016105e1565b6109f181611529565b50565b60006109ff600a5490565b8210610a735760405162461bcd60e51b815260206004820152602c60248201527f455243373231456e756d657261626c653a20676c6f62616c20696e646578206f60448201527f7574206f6620626f756e6473000000000000000000000000000000000000000060648201526084016105e1565b600a8281548110610a8657610a866129a5565b90600052602060002001549050919050565b6000818152600460205260408120546001600160a01b0316806104c35760405162461bcd60e51b815260206004820152602960248201527f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460448201527f656e7420746f6b656e000000000000000000000000000000000000000000000060648201526084016105e1565b60006001600160a01b038216610ba15760405162461bcd60e51b815260206004820152602a60248201527f4552433732313a2062616c616e636520717565727920666f7220746865207a6560448201527f726f20616464726573730000000000000000000000000000000000000000000060648201526084016105e1565b506001600160a01b031660009081526005602052604090205490565b610be77f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a33610383565b610c595760405162461bcd60e51b815260206004820152603060248201527f4c315374616e646172644552433732313a206d7573742068617665207061757360448201527f657220726f6c6520746f2070617573650000000000000000000000000000000060648201526084016105e1565b6109506115e8565b6000828152600160205260408120610c79908361168e565b9392505050565b6060600380546104d890612951565b6001600160a01b038216331415610ce85760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c65720000000000000060448201526064016105e1565b3360008181526007602090815260408083206001600160a01b0387168085529083529281902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b610d7c33836110b4565b610dee5760405162461bcd60e51b815260206004820152603160248201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60448201527f776e6572206e6f7220617070726f76656400000000000000000000000000000060648201526084016105e1565b610dfa8484848461169a565b50505050565b6000818152600460205260409020546060906001600160a01b0316610e8d5760405162461bcd60e51b815260206004820152602f60248201527f4552433732314d657461646174613a2055524920717565727920666f72206e6f60448201527f6e6578697374656e7420746f6b656e000000000000000000000000000000000060648201526084016105e1565b6000610e97611723565b90506000815111610eb75760405180602001604052806000815250610c79565b80610ec184611732565b604051602001610ed29291906129d4565b6040516020818303038152906040529392505050565b60008181526001602052604081206104c390611864565b610f297f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a633610383565b610f9b5760405162461bcd60e51b815260206004820152602f60248201527f4c315374616e646172644552433732313a206d7573742068617665206d696e7460448201527f657220726f6c6520746f206d696e74000000000000000000000000000000000060648201526084016105e1565b610fab828263ffffffff1661186e565b5050565b61089482826119d4565b610fab82826119fa565b6000610c79836001600160a01b038416611ab6565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f780e9d630000000000000000000000000000000000000000000000000000000014806104c357506104c382611b05565b600081815260066020526040902080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b038416908117909155819061107b82610a98565b6001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000818152600460205260408120546001600160a01b031661113e5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860448201527f697374656e7420746f6b656e000000000000000000000000000000000000000060648201526084016105e1565b600061114983610a98565b9050806001600160a01b0316846001600160a01b031614806111845750836001600160a01b03166111798461055b565b6001600160a01b0316145b806111b457506001600160a01b0380821660009081526007602090815260408083209388168352929052205460ff165b949350505050565b826001600160a01b03166111cf82610a98565b6001600160a01b03161461124b5760405162461bcd60e51b815260206004820152602960248201527f4552433732313a207472616e73666572206f6620746f6b656e2074686174206960448201527f73206e6f74206f776e000000000000000000000000000000000000000000000060648201526084016105e1565b6001600160a01b0382166112c65760405162461bcd60e51b8152602060048201526024808201527f4552433732313a207472616e7366657220746f20746865207a65726f2061646460448201527f726573730000000000000000000000000000000000000000000000000000000060648201526084016105e1565b6112d1838383611ba7565b6112dc60008261102e565b6001600160a01b0383166000908152600560205260408120805460019290611305908490612a32565b90915550506001600160a01b0382166000908152600560205260408120805460019290611333908490612a49565b909155505060008181526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b0386811691821790925591518493918716917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b6000828152602081905260409020600101546113c88133611bb2565b61073383836119fa565b6001600160a01b03811633146114505760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201527f20726f6c657320666f722073656c66000000000000000000000000000000000060648201526084016105e1565b610fab8282611c4e565b6000610c79836001600160a01b038416611ceb565b600c5460ff166114c15760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f742070617573656400000000000000000000000060448201526064016105e1565b600c80547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b600061153482610a98565b905061154281600084611ba7565b61154d60008361102e565b6001600160a01b0381166000908152600560205260408120805460019290611576908490612a32565b909155505060008281526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055518391906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b600c5460ff161561163b5760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a207061757365640000000000000000000000000000000060448201526064016105e1565b600c80547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a25861150c3390565b6000610c798383611dde565b6116a58484846111bc565b6116b184848484611e08565b610dfa5760405162461bcd60e51b815260206004820152603260248201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560448201527f63656976657220696d706c656d656e746572000000000000000000000000000060648201526084016105e1565b6060600d80546104d890612951565b60608161177257505060408051808201909152600181527f3000000000000000000000000000000000000000000000000000000000000000602082015290565b8160005b811561179c578061178681612a61565b91506117959050600a83612ac9565b9150611776565b60008167ffffffffffffffff8111156117b7576117b76127c9565b6040519080825280601f01601f1916602001820160405280156117e1576020820181803683370190505b5090505b84156111b4576117f6600183612a32565b9150611803600a86612add565b61180e906030612a49565b60f81b818381518110611823576118236129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535061185d600a86612ac9565b94506117e5565b60006104c3825490565b6001600160a01b0382166118c45760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f206164647265737360448201526064016105e1565b6000818152600460205260409020546001600160a01b0316156119295760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e7465640000000060448201526064016105e1565b61193560008383611ba7565b6001600160a01b038216600090815260056020526040812080546001929061195e908490612a49565b909155505060008181526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b03861690811790915590518392907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b6000828152602081905260409020600101546119f08133611bb2565b6107338383611c4e565b6000828152602081815260408083206001600160a01b038516845290915290205460ff16610fab576000828152602081815260408083206001600160a01b0385168452909152902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055611a723390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054611afd575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556104c3565b5060006104c3565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f80ac58cd000000000000000000000000000000000000000000000000000000001480611b9857507fffffffff0000000000000000000000000000000000000000000000000000000082167f5b5e139f00000000000000000000000000000000000000000000000000000000145b806104c357506104c382611fd3565b610733838383612029565b6000828152602081815260408083206001600160a01b038516845290915290205460ff16610fab57611bee816001600160a01b031660146120ad565b611bf98360206120ad565b604051602001611c0a929190612af1565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529082905262461bcd60e51b82526105e191600401612676565b6000828152602081815260408083206001600160a01b038516845290915290205460ff1615610fab576000828152602081815260408083206001600160a01b038516808552925280832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b60008181526001830160205260408120548015611dd4576000611d0f600183612a32565b8554909150600090611d2390600190612a32565b9050818114611d88576000866000018281548110611d4357611d436129a5565b9060005260206000200154905080876000018481548110611d6657611d666129a5565b6000918252602080832090910192909255918252600188019052604090208390555b8554869080611d9957611d99612b72565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506104c3565b60009150506104c3565b6000826000018281548110611df557611df56129a5565b9060005260206000200154905092915050565b60006001600160a01b0384163b15611fc8576040517f150b7a020000000000000000000000000000000000000000000000000000000081526001600160a01b0385169063150b7a0290611e65903390899088908890600401612ba1565b602060405180830381600087803b158015611e7f57600080fd5b505af1925050508015611ecd575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201909252611eca91810190612bdd565b60015b611f7d573d808015611efb576040519150601f19603f3d011682016040523d82523d6000602084013e611f00565b606091505b508051611f755760405162461bcd60e51b815260206004820152603260248201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560448201527f63656976657220696d706c656d656e746572000000000000000000000000000060648201526084016105e1565b805181602001fd5b7fffffffff00000000000000000000000000000000000000000000000000000000167f150b7a02000000000000000000000000000000000000000000000000000000001490506111b4565b506001949350505050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f5a05180f0000000000000000000000000000000000000000000000000000000014806104c357506104c3826122d6565b61203483838361236d565b600c5460ff16156107335760405162461bcd60e51b815260206004820152602b60248201527f4552433732315061757361626c653a20746f6b656e207472616e73666572207760448201527f68696c652070617573656400000000000000000000000000000000000000000060648201526084016105e1565b606060006120bc836002612bfa565b6120c7906002612a49565b67ffffffffffffffff8111156120df576120df6127c9565b6040519080825280601f01601f191660200182016040528015612109576020820181803683370190505b5090507f300000000000000000000000000000000000000000000000000000000000000081600081518110612140576121406129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f7800000000000000000000000000000000000000000000000000000000000000816001815181106121a3576121a36129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060006121df846002612bfa565b6121ea906001612a49565b90505b6001811115612287577f303132333435363738396162636465660000000000000000000000000000000085600f166010811061222b5761222b6129a5565b1a60f81b828281518110612241576122416129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060049490941c9361228081612c37565b90506121ed565b508315610c795760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e7460448201526064016105e1565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806104c357507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316146104c3565b6001600160a01b0383166123c8576123c381600a80546000838152600b60205260408120829055600182018355919091527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a80155565b6123eb565b816001600160a01b0316836001600160a01b0316146123eb576123eb8382612425565b6001600160a01b03821661240257610733816124c2565b826001600160a01b0316826001600160a01b031614610733576107338282612571565b6000600161243284610b23565b61243c9190612a32565b60008381526009602052604090205490915080821461248f576001600160a01b03841660009081526008602090815260408083208584528252808320548484528184208190558352600990915290208190555b5060009182526009602090815260408084208490556001600160a01b039094168352600881528383209183525290812055565b600a546000906124d490600190612a32565b6000838152600b6020526040812054600a80549394509092849081106124fc576124fc6129a5565b9060005260206000200154905080600a838154811061251d5761251d6129a5565b6000918252602080832090910192909255828152600b9091526040808220849055858252812055600a80548061255557612555612b72565b6001900381819060005260206000200160009055905550505050565b600061257c83610b23565b6001600160a01b039093166000908152600860209081526040808320868452825280832085905593825260099052919091209190915550565b7fffffffff00000000000000000000000000000000000000000000000000000000811681146109f157600080fd5b6000602082840312156125f557600080fd5b8135610c79816125b5565b60005b8381101561261b578181015183820152602001612603565b83811115610dfa5750506000910152565b60008151808452612644816020860160208601612600565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610c79602083018461262c565b60006020828403121561269b57600080fd5b5035919050565b80356001600160a01b03811681146126b957600080fd5b919050565b600080604083850312156126d157600080fd5b6126da836126a2565b946020939093013593505050565b6000806000606084860312156126fd57600080fd5b612706846126a2565b9250612714602085016126a2565b9150604084013590509250925092565b6000806040838503121561273757600080fd5b82359150612747602084016126a2565b90509250929050565b60006020828403121561276257600080fd5b610c79826126a2565b6000806040838503121561277e57600080fd5b50508035926020909101359150565b600080604083850312156127a057600080fd5b6127a9836126a2565b9150602083013580151581146127be57600080fd5b809150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000806000806080858703121561280e57600080fd5b612817856126a2565b9350612825602086016126a2565b925060408501359150606085013567ffffffffffffffff8082111561284957600080fd5b818701915087601f83011261285d57600080fd5b81358181111561286f5761286f6127c9565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156128b5576128b56127c9565b816040528281528a60208487010111156128ce57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000806040838503121561290557600080fd5b61290e836126a2565b9150602083013563ffffffff811681146127be57600080fd5b6000806040838503121561293a57600080fd5b612943836126a2565b9150612747602084016126a2565b600181811c9082168061296557607f821691505b6020821081141561299f577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600083516129e6818460208801612600565b8351908301906129fa818360208801612600565b01949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600082821015612a4457612a44612a03565b500390565b60008219821115612a5c57612a5c612a03565b500190565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415612a9357612a93612a03565b5060010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b600082612ad857612ad8612a9a565b500490565b600082612aec57612aec612a9a565b500690565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000815260008351612b29816017850160208801612600565b7f206973206d697373696e6720726f6c65200000000000000000000000000000006017918401918201528351612b66816028840160208801612600565b01602801949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b60006001600160a01b03808716835280861660208401525083604083015260806060830152612bd3608083018461262c565b9695505050505050565b600060208284031215612bef57600080fd5b8151610c79816125b5565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615612c3257612c32612a03565b500290565b600081612c4657612c46612a03565b507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019056fea2646970667358221220a102dbe17ef38f8cce6263264d228c002beb2838fc154448fd5bca7ecb69e06164736f6c63430008090033a264697066735822122058efde1acbbbd28d376d507768b5326683d657659736de46750792e79e06e41264736f6c63430008090033",
		},
		verseBuilderContractSet,
		nftBridgeContractSet,
	}

	deploy2 = []deployable{
		&deployment{
			contract: l1StandardERC20Factory,
			// commit: https://github.com/oasysgames/oasys-optimism/blob/48fa3d9529d15f491b88e37274df3b3411524613/packages/contracts/contracts/oasys/L1/token/L1StandardERC721Factory.sol
			code: "0x608060405234801561001057600080fd5b506004361061002b5760003560e01c80630b6ec17814610030575b600080fd5b61004361003e3660046101c2565b610045565b005b6000338383604051610056906100db565b610062939291906102a0565b604051809103906000f08015801561007e573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff16826040516100a691906102eb565b604051908190038120907fd714a43f627528ad95fc3dcf6c453cf595be2f4d75c58c4273f17208ed899f4490600090a3505050565b6124338061030883390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f83011261012857600080fd5b813567ffffffffffffffff80821115610143576101436100e8565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610189576101896100e8565b816040528381528660208588010111156101a257600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080604083850312156101d557600080fd5b823567ffffffffffffffff808211156101ed57600080fd5b6101f986838701610117565b9350602085013591508082111561020f57600080fd5b5061021c85828601610117565b9150509250929050565b60005b83811015610241578181015183820152602001610229565b83811115610250576000848401525b50505050565b6000815180845261026e816020860160208601610226565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b73ffffffffffffffffffffffffffffffffffffffff841681526060602082015260006102cf6060830185610256565b82810360408401526102e18185610256565b9695505050505050565b600082516102fd818460208701610226565b919091019291505056fe60806040523480156200001157600080fd5b5060405162002433380380620024338339810160408190526200003491620003b6565b8151829082906200004d90600590602085019062000243565b5080516200006390600690602084019062000243565b50506007805460ff19169055506200007d600084620000de565b620000a97f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a684620000de565b620000d57f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a84620000de565b5050506200047d565b620000f582826200012160201b62000abd1760201c565b60008281526001602090815260409091206200011c91839062000ac762000131821b17901c565b505050565b6200012d828262000151565b5050565b600062000148836001600160a01b038416620001f1565b90505b92915050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff166200012d576000828152602081815260408083206001600160a01b03851684529091529020805460ff19166001179055620001ad3390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b60008181526001830160205260408120546200023a575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556200014b565b5060006200014b565b828054620002519062000440565b90600052602060002090601f016020900481019282620002755760008555620002c0565b82601f106200029057805160ff1916838001178555620002c0565b82800160010185558215620002c0579182015b82811115620002c0578251825591602001919060010190620002a3565b50620002ce929150620002d2565b5090565b5b80821115620002ce5760008155600101620002d3565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200031157600080fd5b81516001600160401b03808211156200032e576200032e620002e9565b604051601f8301601f19908116603f01168101908282118183101715620003595762000359620002e9565b816040528381526020925086838588010111156200037657600080fd5b600091505b838210156200039a57858201830151818301840152908201906200037b565b83821115620003ac5760008385830101525b9695505050505050565b600080600060608486031215620003cc57600080fd5b83516001600160a01b0381168114620003e457600080fd5b60208501519093506001600160401b03808211156200040257600080fd5b6200041087838801620002ff565b935060408601519150808211156200042757600080fd5b506200043686828701620002ff565b9150509250925092565b600181811c908216806200045557607f821691505b602082108114156200047757634e487b7160e01b600052602260045260246000fd5b50919050565b611fa6806200048d6000396000f3fe608060405234801561001057600080fd5b50600436106101c45760003560e01c806370a08231116100f9578063a457c2d711610097578063d539139311610071578063d5391393146103fa578063d547741f14610421578063dd62ed3e14610434578063e63ab1e91461047a57600080fd5b8063a457c2d7146103c1578063a9059cbb146103d4578063ca15c873146103e757600080fd5b80639010d07c116100d35780639010d07c1461033557806391d148541461036d57806395d89b41146103b1578063a217fddf146103b957600080fd5b806370a08231146102e457806379cc67901461031a5780638456cb591461032d57600080fd5b8063313ce567116101665780633f4ba83a116101405780633f4ba83a146102ab57806340c10f19146102b357806342966c68146102c65780635c975abb146102d957600080fd5b8063313ce5671461027657806336568abe14610285578063395093511461029857600080fd5b806318160ddd116101a257806318160ddd1461021957806323b872dd1461022b578063248a9ca31461023e5780632f2ff15d1461026157600080fd5b806301ffc9a7146101c957806306fdde03146101f1578063095ea7b314610206575b600080fd5b6101dc6101d7366004611b44565b6104a1565b60405190151581526020015b60405180910390f35b6101f96104fd565b6040516101e89190611bb2565b6101dc610214366004611c2c565b61058f565b6004545b6040519081526020016101e8565b6101dc610239366004611c56565b6105a5565b61021d61024c366004611c92565b60009081526020819052604090206001015490565b61027461026f366004611cab565b610676565b005b604051601281526020016101e8565b610274610293366004611cab565b61069d565b6101dc6102a6366004611c2c565b6106bf565b610274610708565b6102746102c1366004611c2c565b6107ae565b6102746102d4366004611c92565b610858565b60075460ff166101dc565b61021d6102f2366004611cd7565b73ffffffffffffffffffffffffffffffffffffffff1660009081526002602052604090205490565b610274610328366004611c2c565b610865565b6102746108ff565b610348610343366004611cf2565b6109a3565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016101e8565b6101dc61037b366004611cab565b60009182526020828152604080842073ffffffffffffffffffffffffffffffffffffffff93909316845291905290205460ff1690565b6101f96109c2565b61021d600081565b6101dc6103cf366004611c2c565b6109d1565b6101dc6103e2366004611c2c565b610a8f565b61021d6103f5366004611c92565b610a9c565b61021d7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a681565b61027461042f366004611cab565b610ab3565b61021d610442366004611d14565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260036020908152604080832093909416825291909152205490565b61021d7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a81565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f5a05180f0000000000000000000000000000000000000000000000000000000014806104f757506104f782610ae9565b92915050565b60606005805461050c90611d3e565b80601f016020809104026020016040519081016040528092919081815260200182805461053890611d3e565b80156105855780601f1061055a57610100808354040283529160200191610585565b820191906000526020600020905b81548152906001019060200180831161056857829003601f168201915b5050505050905090565b600061059c338484610b80565b50600192915050565b60006105b2848484610cff565b73ffffffffffffffffffffffffffffffffffffffff841660009081526003602090815260408083203384529091529020548281101561065e5760405162461bcd60e51b815260206004820152602860248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206160448201527f6c6c6f77616e636500000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b61066b8533858403610b80565b506001949350505050565b6106808282610f71565b60008281526001602052604090206106989082610ac7565b505050565b6106a78282610f97565b6000828152600160205260409020610698908261102c565b33600081815260036020908152604080832073ffffffffffffffffffffffffffffffffffffffff87168452909152812054909161059c918590610703908690611dc1565b610b80565b6107327f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a3361037b565b6107a45760405162461bcd60e51b815260206004820152603960248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f76652070617573657220726f6c6520746f20756e7061757365000000000000006064820152608401610655565b6107ac61104e565b565b6107d87f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a63361037b565b61084a5760405162461bcd60e51b815260206004820152603660248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f7665206d696e74657220726f6c6520746f206d696e74000000000000000000006064820152608401610655565b6108548282611115565b5050565b6108623382611227565b50565b60006108718333610442565b9050818110156108e85760405162461bcd60e51b8152602060048201526024808201527f45524332303a206275726e20616d6f756e74206578636565647320616c6c6f7760448201527f616e6365000000000000000000000000000000000000000000000000000000006064820152608401610655565b6108f58333848403610b80565b6106988383611227565b6109297f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a3361037b565b61099b5760405162461bcd60e51b815260206004820152603760248201527f45524332305072657365744d696e7465725061757365723a206d75737420686160448201527f76652070617573657220726f6c6520746f2070617573650000000000000000006064820152608401610655565b6107ac6113ec565b60008281526001602052604081206109bb9083611492565b9392505050565b60606006805461050c90611d3e565b33600090815260036020908152604080832073ffffffffffffffffffffffffffffffffffffffff8616845290915281205482811015610a785760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f0000000000000000000000000000000000000000000000000000006064820152608401610655565b610a853385858403610b80565b5060019392505050565b600061059c338484610cff565b60008181526001602052604081206104f79061149e565b6106a782826114a8565b61085482826114ce565b60006109bb8373ffffffffffffffffffffffffffffffffffffffff84166115be565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806104f757507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316146104f7565b73ffffffffffffffffffffffffffffffffffffffff8316610c085760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f72657373000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff8216610c915760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f73730000000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff83811660008181526003602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b73ffffffffffffffffffffffffffffffffffffffff8316610d885760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f64726573730000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff8216610e115760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f65737300000000000000000000000000000000000000000000000000000000006064820152608401610655565b610e1c83838361160d565b73ffffffffffffffffffffffffffffffffffffffff831660009081526002602052604090205481811015610eb85760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e636500000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff808516600090815260026020526040808220858503905591851681529081208054849290610efc908490611dc1565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610f6291815260200190565b60405180910390a35b50505050565b600082815260208190526040902060010154610f8d8133611618565b61069883836114ce565b73ffffffffffffffffffffffffffffffffffffffff811633146110225760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201527f20726f6c657320666f722073656c6600000000000000000000000000000000006064820152608401610655565b61085482826116ce565b60006109bb8373ffffffffffffffffffffffffffffffffffffffff8416611785565b60075460ff166110a05760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f74207061757365640000000000000000000000006044820152606401610655565b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390a1565b73ffffffffffffffffffffffffffffffffffffffff82166111785760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606401610655565b6111846000838361160d565b80600460008282546111969190611dc1565b909155505073ffffffffffffffffffffffffffffffffffffffff8216600090815260026020526040812080548392906111d0908490611dc1565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff82166112b05760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f73000000000000000000000000000000000000000000000000000000000000006064820152608401610655565b6112bc8260008361160d565b73ffffffffffffffffffffffffffffffffffffffff8216600090815260026020526040902054818110156113585760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f63650000000000000000000000000000000000000000000000000000000000006064820152608401610655565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600260205260408120838303905560048054849290611394908490611dd9565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a3505050565b60075460ff161561143f5760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a20706175736564000000000000000000000000000000006044820152606401610655565b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586110eb3390565b60006109bb8383611878565b60006104f7825490565b6000828152602081905260409020600101546114c48133611618565b61069883836116ce565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff166108545760008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff85168452909152902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790556115603390565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054611605575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556104f7565b5060006104f7565b6106988383836118a2565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff166108545761166e8173ffffffffffffffffffffffffffffffffffffffff16601461191b565b61167983602061191b565b60405160200161168a929190611df0565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529082905262461bcd60e51b825261065591600401611bb2565b60008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516845290915290205460ff16156108545760008281526020818152604080832073ffffffffffffffffffffffffffffffffffffffff8516808552925280832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b6000818152600183016020526040812054801561186e5760006117a9600183611dd9565b85549091506000906117bd90600190611dd9565b90508181146118225760008660000182815481106117dd576117dd611e71565b906000526020600020015490508087600001848154811061180057611800611e71565b6000918252602080832090910192909255918252600188019052604090208390555b855486908061183357611833611ea0565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506104f7565b60009150506104f7565b600082600001828154811061188f5761188f611e71565b9060005260206000200154905092915050565b60075460ff16156106985760405162461bcd60e51b815260206004820152602a60248201527f45524332305061757361626c653a20746f6b656e207472616e7366657220776860448201527f696c6520706175736564000000000000000000000000000000000000000000006064820152608401610655565b6060600061192a836002611ecf565b611935906002611dc1565b67ffffffffffffffff81111561194d5761194d611f0c565b6040519080825280601f01601f191660200182016040528015611977576020820181803683370190505b5090507f3000000000000000000000000000000000000000000000000000000000000000816000815181106119ae576119ae611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f780000000000000000000000000000000000000000000000000000000000000081600181518110611a1157611a11611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053506000611a4d846002611ecf565b611a58906001611dc1565b90505b6001811115611af5577f303132333435363738396162636465660000000000000000000000000000000085600f1660108110611a9957611a99611e71565b1a60f81b828281518110611aaf57611aaf611e71565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060049490941c93611aee81611f3b565b9050611a5b565b5083156109bb5760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e746044820152606401610655565b600060208284031215611b5657600080fd5b81357fffffffff00000000000000000000000000000000000000000000000000000000811681146109bb57600080fd5b60005b83811015611ba1578181015183820152602001611b89565b83811115610f6b5750506000910152565b6020815260008251806020840152611bd1816040850160208701611b86565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b803573ffffffffffffffffffffffffffffffffffffffff81168114611c2757600080fd5b919050565b60008060408385031215611c3f57600080fd5b611c4883611c03565b946020939093013593505050565b600080600060608486031215611c6b57600080fd5b611c7484611c03565b9250611c8260208501611c03565b9150604084013590509250925092565b600060208284031215611ca457600080fd5b5035919050565b60008060408385031215611cbe57600080fd5b82359150611cce60208401611c03565b90509250929050565b600060208284031215611ce957600080fd5b6109bb82611c03565b60008060408385031215611d0557600080fd5b50508035926020909101359150565b60008060408385031215611d2757600080fd5b611d3083611c03565b9150611cce60208401611c03565b600181811c90821680611d5257607f821691505b60208210811415611d8c577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008219821115611dd457611dd4611d92565b500190565b600082821015611deb57611deb611d92565b500390565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000815260008351611e28816017850160208801611b86565b7f206973206d697373696e6720726f6c65200000000000000000000000000000006017918401918201528351611e65816028840160208801611b86565b01602801949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615611f0757611f07611d92565b500290565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600081611f4a57611f4a611d92565b507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019056fea2646970667358221220279d5b6f44263b9c7a2fd8e5a6715f8168357d04499c7b1fed9172c006be848864736f6c63430008090033a2646970667358221220ac8d6c619affd4c59d71b416b87e6e7e116b5c247a3eae1b78fa4a14dbacc26964736f6c63430008090033",
		},
		&deployment{
			contract: l1StandardERC721Factory,
			// commit: https://github.com/oasysgames/oasys-optimism/blob/48fa3d9529d15f491b88e37274df3b3411524613/packages/contracts/contracts/oasys/L1/token/L1StandardERC20Factory.sol
			code: "0x608060405234801561001057600080fd5b506004361061002b5760003560e01c8063c4af445814610030575b600080fd5b61004361003e3660046101c6565b610045565b005b600033848484604051610057906100de565b61006494939291906102c8565b604051809103906000f080158015610080573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff16836040516100a89190610328565b604051908190038120907fbda470470721b5a2c56d61dc0aa9496dd02d39170f9dff803c35efbab673652290600090a350505050565b61316e806200034583390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f83011261012c57600080fd5b813567ffffffffffffffff80821115610147576101476100ec565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561018d5761018d6100ec565b816040528381528660208588010111156101a657600080fd5b836020870160208301376000602085830101528094505050505092915050565b6000806000606084860312156101db57600080fd5b833567ffffffffffffffff808211156101f357600080fd5b6101ff8783880161011b565b9450602086013591508082111561021557600080fd5b6102218783880161011b565b9350604086013591508082111561023757600080fd5b506102448682870161011b565b9150509250925092565b60005b83811015610269578181015183820152602001610251565b83811115610278576000848401525b50505050565b6000815180845261029681602086016020860161024e565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b73ffffffffffffffffffffffffffffffffffffffff851681526080602082015260006102f7608083018661027e565b8281036040840152610309818661027e565b9050828103606084015261031d818561027e565b979650505050505050565b6000825161033a81846020870161024e565b919091019291505056fe60806040523480156200001157600080fd5b506040516200316e3803806200316e8339810160408190526200003491620003cd565b8251839083906200004d9060029060208501906200025a565b508051620000639060039060208401906200025a565b5050600c805460ff191690555080516200008590600d9060208401906200025a565b5062000093600085620000f5565b620000bf7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a685620000f5565b620000eb7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a85620000f5565b50505050620004bc565b6200010c82826200013860201b62000fb91760201c565b60008281526001602090815260409091206200013391839062000fc362000148821b17901c565b505050565b62000144828262000168565b5050565b60006200015f836001600160a01b03841662000208565b90505b92915050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff1662000144576000828152602081815260408083206001600160a01b03851684529091529020805460ff19166001179055620001c43390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054620002515750815460018181018455600084815260208082209093018490558454848252828601909352604090209190915562000162565b50600062000162565b82805462000268906200047f565b90600052602060002090601f0160209004810192826200028c5760008555620002d7565b82601f10620002a757805160ff1916838001178555620002d7565b82800160010185558215620002d7579182015b82811115620002d7578251825591602001919060010190620002ba565b50620002e5929150620002e9565b5090565b5b80821115620002e55760008155600101620002ea565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200032857600080fd5b81516001600160401b038082111562000345576200034562000300565b604051601f8301601f19908116603f0116810190828211818310171562000370576200037062000300565b816040528381526020925086838588010111156200038d57600080fd5b600091505b83821015620003b1578582018301518183018401529082019062000392565b83821115620003c35760008385830101525b9695505050505050565b60008060008060808587031215620003e457600080fd5b84516001600160a01b0381168114620003fc57600080fd5b60208601519094506001600160401b03808211156200041a57600080fd5b620004288883890162000316565b945060408701519150808211156200043f57600080fd5b6200044d8883890162000316565b935060608701519150808211156200046457600080fd5b50620004738782880162000316565b91505092959194509250565b600181811c908216806200049457607f821691505b60208210811415620004b657634e487b7160e01b600052602260045260246000fd5b50919050565b612ca280620004cc6000396000f3fe608060405234801561001057600080fd5b50600436106101e55760003560e01c80636352211e1161010f578063b88d4fde116100a2578063d539139311610071578063d53913931461041b578063d547741f14610442578063e63ab1e914610455578063e985e9c51461047c57600080fd5b8063b88d4fde146103cf578063c87b56dd146103e2578063ca15c873146103f5578063d35e29d71461040857600080fd5b806391d14854116100de57806391d148541461037557806395d89b41146103ac578063a217fddf146103b4578063a22cb465146103bc57600080fd5b80636352211e1461033457806370a08231146103475780638456cb591461035a5780639010d07c1461036257600080fd5b80632f2ff15d1161018757806342842e0e1161015657806342842e0e146102f057806342966c68146103035780634f6ccce7146103165780635c975abb1461032957600080fd5b80632f2ff15d146102af5780632f745c59146102c257806336568abe146102d55780633f4ba83a146102e857600080fd5b8063095ea7b3116101c3578063095ea7b31461025257806318160ddd1461026757806323b872dd14610279578063248a9ca31461028c57600080fd5b806301ffc9a7146101ea57806306fdde0314610212578063081812fc14610227575b600080fd5b6101fd6101f83660046125e3565b6104b8565b60405190151581526020015b60405180910390f35b61021a6104c9565b6040516102099190612676565b61023a610235366004612689565b61055b565b6040516001600160a01b039091168152602001610209565b6102656102603660046126be565b610606565b005b600a545b604051908152602001610209565b6102656102873660046126e8565b610738565b61026b61029a366004612689565b60009081526020819052604090206001015490565b6102656102bd366004612724565b6107c0565b61026b6102d03660046126be565b6107e2565b6102656102e3366004612724565b61088a565b6102656108ac565b6102656102fe3660046126e8565b610952565b610265610311366004612689565b61096d565b61026b610324366004612689565b6109f4565b600c5460ff166101fd565b61023a610342366004612689565b610a98565b61026b610355366004612750565b610b23565b610265610bbd565b61023a61037036600461276b565b610c61565b6101fd610383366004612724565b6000918252602082815260408084206001600160a01b0393909316845291905290205460ff1690565b61021a610c80565b61026b600081565b6102656103ca36600461278d565b610c8f565b6102656103dd3660046127f8565b610d72565b61021a6103f0366004612689565b610e00565b61026b610403366004612689565b610ee8565b6102656104163660046128f2565b610eff565b61026b7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a681565b610265610450366004612724565b610faf565b61026b7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a81565b6101fd61048a366004612927565b6001600160a01b03918216600090815260076020908152604080832093909416825291909152205460ff1690565b60006104c382610fd8565b92915050565b6060600280546104d890612951565b80601f016020809104026020016040519081016040528092919081815260200182805461050490612951565b80156105515780601f1061052657610100808354040283529160200191610551565b820191906000526020600020905b81548152906001019060200180831161053457829003601f168201915b5050505050905090565b6000818152600460205260408120546001600160a01b03166105ea5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860448201527f697374656e7420746f6b656e000000000000000000000000000000000000000060648201526084015b60405180910390fd5b506000908152600660205260409020546001600160a01b031690565b600061061182610a98565b9050806001600160a01b0316836001600160a01b0316141561069b5760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560448201527f720000000000000000000000000000000000000000000000000000000000000060648201526084016105e1565b336001600160a01b03821614806106b757506106b7813361048a565b6107295760405162461bcd60e51b815260206004820152603860248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f76656420666f7220616c6c000000000000000060648201526084016105e1565b610733838361102e565b505050565b610743335b826110b4565b6107b55760405162461bcd60e51b815260206004820152603160248201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60448201527f776e6572206e6f7220617070726f76656400000000000000000000000000000060648201526084016105e1565b6107338383836111bc565b6107ca82826113ac565b60008281526001602052604090206107339082610fc3565b60006107ed83610b23565b82106108615760405162461bcd60e51b815260206004820152602b60248201527f455243373231456e756d657261626c653a206f776e657220696e646578206f7560448201527f74206f6620626f756e647300000000000000000000000000000000000000000060648201526084016105e1565b506001600160a01b03919091166000908152600860209081526040808320938352929052205490565b61089482826113d2565b6000828152600160205260409020610733908261145a565b6108d67f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a33610383565b6109485760405162461bcd60e51b815260206004820152603260248201527f4c315374616e646172644552433732313a206d7573742068617665207061757360448201527f657220726f6c6520746f20756e7061757365000000000000000000000000000060648201526084016105e1565b61095061146f565b565b61073383838360405180602001604052806000815250610d72565b6109763361073d565b6109e85760405162461bcd60e51b815260206004820152603060248201527f4552433732314275726e61626c653a2063616c6c6572206973206e6f74206f7760448201527f6e6572206e6f7220617070726f7665640000000000000000000000000000000060648201526084016105e1565b6109f181611529565b50565b60006109ff600a5490565b8210610a735760405162461bcd60e51b815260206004820152602c60248201527f455243373231456e756d657261626c653a20676c6f62616c20696e646578206f60448201527f7574206f6620626f756e6473000000000000000000000000000000000000000060648201526084016105e1565b600a8281548110610a8657610a866129a5565b90600052602060002001549050919050565b6000818152600460205260408120546001600160a01b0316806104c35760405162461bcd60e51b815260206004820152602960248201527f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460448201527f656e7420746f6b656e000000000000000000000000000000000000000000000060648201526084016105e1565b60006001600160a01b038216610ba15760405162461bcd60e51b815260206004820152602a60248201527f4552433732313a2062616c616e636520717565727920666f7220746865207a6560448201527f726f20616464726573730000000000000000000000000000000000000000000060648201526084016105e1565b506001600160a01b031660009081526005602052604090205490565b610be77f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a33610383565b610c595760405162461bcd60e51b815260206004820152603060248201527f4c315374616e646172644552433732313a206d7573742068617665207061757360448201527f657220726f6c6520746f2070617573650000000000000000000000000000000060648201526084016105e1565b6109506115e8565b6000828152600160205260408120610c79908361168e565b9392505050565b6060600380546104d890612951565b6001600160a01b038216331415610ce85760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c65720000000000000060448201526064016105e1565b3360008181526007602090815260408083206001600160a01b0387168085529083529281902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b610d7c33836110b4565b610dee5760405162461bcd60e51b815260206004820152603160248201527f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60448201527f776e6572206e6f7220617070726f76656400000000000000000000000000000060648201526084016105e1565b610dfa8484848461169a565b50505050565b6000818152600460205260409020546060906001600160a01b0316610e8d5760405162461bcd60e51b815260206004820152602f60248201527f4552433732314d657461646174613a2055524920717565727920666f72206e6f60448201527f6e6578697374656e7420746f6b656e000000000000000000000000000000000060648201526084016105e1565b6000610e97611723565b90506000815111610eb75760405180602001604052806000815250610c79565b80610ec184611732565b604051602001610ed29291906129d4565b6040516020818303038152906040529392505050565b60008181526001602052604081206104c390611864565b610f297f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a633610383565b610f9b5760405162461bcd60e51b815260206004820152602f60248201527f4c315374616e646172644552433732313a206d7573742068617665206d696e7460448201527f657220726f6c6520746f206d696e74000000000000000000000000000000000060648201526084016105e1565b610fab828263ffffffff1661186e565b5050565b61089482826119d4565b610fab82826119fa565b6000610c79836001600160a01b038416611ab6565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f780e9d630000000000000000000000000000000000000000000000000000000014806104c357506104c382611b05565b600081815260066020526040902080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b038416908117909155819061107b82610a98565b6001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000818152600460205260408120546001600160a01b031661113e5760405162461bcd60e51b815260206004820152602c60248201527f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860448201527f697374656e7420746f6b656e000000000000000000000000000000000000000060648201526084016105e1565b600061114983610a98565b9050806001600160a01b0316846001600160a01b031614806111845750836001600160a01b03166111798461055b565b6001600160a01b0316145b806111b457506001600160a01b0380821660009081526007602090815260408083209388168352929052205460ff165b949350505050565b826001600160a01b03166111cf82610a98565b6001600160a01b03161461124b5760405162461bcd60e51b815260206004820152602960248201527f4552433732313a207472616e73666572206f6620746f6b656e2074686174206960448201527f73206e6f74206f776e000000000000000000000000000000000000000000000060648201526084016105e1565b6001600160a01b0382166112c65760405162461bcd60e51b8152602060048201526024808201527f4552433732313a207472616e7366657220746f20746865207a65726f2061646460448201527f726573730000000000000000000000000000000000000000000000000000000060648201526084016105e1565b6112d1838383611ba7565b6112dc60008261102e565b6001600160a01b0383166000908152600560205260408120805460019290611305908490612a32565b90915550506001600160a01b0382166000908152600560205260408120805460019290611333908490612a49565b909155505060008181526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b0386811691821790925591518493918716917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b6000828152602081905260409020600101546113c88133611bb2565b61073383836119fa565b6001600160a01b03811633146114505760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201527f20726f6c657320666f722073656c66000000000000000000000000000000000060648201526084016105e1565b610fab8282611c4e565b6000610c79836001600160a01b038416611ceb565b600c5460ff166114c15760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f742070617573656400000000000000000000000060448201526064016105e1565b600c80547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b600061153482610a98565b905061154281600084611ba7565b61154d60008361102e565b6001600160a01b0381166000908152600560205260408120805460019290611576908490612a32565b909155505060008281526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055518391906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b600c5460ff161561163b5760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a207061757365640000000000000000000000000000000060448201526064016105e1565b600c80547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a25861150c3390565b6000610c798383611dde565b6116a58484846111bc565b6116b184848484611e08565b610dfa5760405162461bcd60e51b815260206004820152603260248201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560448201527f63656976657220696d706c656d656e746572000000000000000000000000000060648201526084016105e1565b6060600d80546104d890612951565b60608161177257505060408051808201909152600181527f3000000000000000000000000000000000000000000000000000000000000000602082015290565b8160005b811561179c578061178681612a61565b91506117959050600a83612ac9565b9150611776565b60008167ffffffffffffffff8111156117b7576117b76127c9565b6040519080825280601f01601f1916602001820160405280156117e1576020820181803683370190505b5090505b84156111b4576117f6600183612a32565b9150611803600a86612add565b61180e906030612a49565b60f81b818381518110611823576118236129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535061185d600a86612ac9565b94506117e5565b60006104c3825490565b6001600160a01b0382166118c45760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f206164647265737360448201526064016105e1565b6000818152600460205260409020546001600160a01b0316156119295760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e7465640000000060448201526064016105e1565b61193560008383611ba7565b6001600160a01b038216600090815260056020526040812080546001929061195e908490612a49565b909155505060008181526004602052604080822080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b03861690811790915590518392907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b6000828152602081905260409020600101546119f08133611bb2565b6107338383611c4e565b6000828152602081815260408083206001600160a01b038516845290915290205460ff16610fab576000828152602081815260408083206001600160a01b0385168452909152902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055611a723390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000818152600183016020526040812054611afd575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556104c3565b5060006104c3565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f80ac58cd000000000000000000000000000000000000000000000000000000001480611b9857507fffffffff0000000000000000000000000000000000000000000000000000000082167f5b5e139f00000000000000000000000000000000000000000000000000000000145b806104c357506104c382611fd3565b610733838383612029565b6000828152602081815260408083206001600160a01b038516845290915290205460ff16610fab57611bee816001600160a01b031660146120ad565b611bf98360206120ad565b604051602001611c0a929190612af1565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529082905262461bcd60e51b82526105e191600401612676565b6000828152602081815260408083206001600160a01b038516845290915290205460ff1615610fab576000828152602081815260408083206001600160a01b038516808552925280832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b60008181526001830160205260408120548015611dd4576000611d0f600183612a32565b8554909150600090611d2390600190612a32565b9050818114611d88576000866000018281548110611d4357611d436129a5565b9060005260206000200154905080876000018481548110611d6657611d666129a5565b6000918252602080832090910192909255918252600188019052604090208390555b8554869080611d9957611d99612b72565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506104c3565b60009150506104c3565b6000826000018281548110611df557611df56129a5565b9060005260206000200154905092915050565b60006001600160a01b0384163b15611fc8576040517f150b7a020000000000000000000000000000000000000000000000000000000081526001600160a01b0385169063150b7a0290611e65903390899088908890600401612ba1565b602060405180830381600087803b158015611e7f57600080fd5b505af1925050508015611ecd575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201909252611eca91810190612bdd565b60015b611f7d573d808015611efb576040519150601f19603f3d011682016040523d82523d6000602084013e611f00565b606091505b508051611f755760405162461bcd60e51b815260206004820152603260248201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560448201527f63656976657220696d706c656d656e746572000000000000000000000000000060648201526084016105e1565b805181602001fd5b7fffffffff00000000000000000000000000000000000000000000000000000000167f150b7a02000000000000000000000000000000000000000000000000000000001490506111b4565b506001949350505050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f5a05180f0000000000000000000000000000000000000000000000000000000014806104c357506104c3826122d6565b61203483838361236d565b600c5460ff16156107335760405162461bcd60e51b815260206004820152602b60248201527f4552433732315061757361626c653a20746f6b656e207472616e73666572207760448201527f68696c652070617573656400000000000000000000000000000000000000000060648201526084016105e1565b606060006120bc836002612bfa565b6120c7906002612a49565b67ffffffffffffffff8111156120df576120df6127c9565b6040519080825280601f01601f191660200182016040528015612109576020820181803683370190505b5090507f300000000000000000000000000000000000000000000000000000000000000081600081518110612140576121406129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f7800000000000000000000000000000000000000000000000000000000000000816001815181106121a3576121a36129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060006121df846002612bfa565b6121ea906001612a49565b90505b6001811115612287577f303132333435363738396162636465660000000000000000000000000000000085600f166010811061222b5761222b6129a5565b1a60f81b828281518110612241576122416129a5565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060049490941c9361228081612c37565b90506121ed565b508315610c795760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e7460448201526064016105e1565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806104c357507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316146104c3565b6001600160a01b0383166123c8576123c381600a80546000838152600b60205260408120829055600182018355919091527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a80155565b6123eb565b816001600160a01b0316836001600160a01b0316146123eb576123eb8382612425565b6001600160a01b03821661240257610733816124c2565b826001600160a01b0316826001600160a01b031614610733576107338282612571565b6000600161243284610b23565b61243c9190612a32565b60008381526009602052604090205490915080821461248f576001600160a01b03841660009081526008602090815260408083208584528252808320548484528184208190558352600990915290208190555b5060009182526009602090815260408084208490556001600160a01b039094168352600881528383209183525290812055565b600a546000906124d490600190612a32565b6000838152600b6020526040812054600a80549394509092849081106124fc576124fc6129a5565b9060005260206000200154905080600a838154811061251d5761251d6129a5565b6000918252602080832090910192909255828152600b9091526040808220849055858252812055600a80548061255557612555612b72565b6001900381819060005260206000200160009055905550505050565b600061257c83610b23565b6001600160a01b039093166000908152600860209081526040808320868452825280832085905593825260099052919091209190915550565b7fffffffff00000000000000000000000000000000000000000000000000000000811681146109f157600080fd5b6000602082840312156125f557600080fd5b8135610c79816125b5565b60005b8381101561261b578181015183820152602001612603565b83811115610dfa5750506000910152565b60008151808452612644816020860160208601612600565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610c79602083018461262c565b60006020828403121561269b57600080fd5b5035919050565b80356001600160a01b03811681146126b957600080fd5b919050565b600080604083850312156126d157600080fd5b6126da836126a2565b946020939093013593505050565b6000806000606084860312156126fd57600080fd5b612706846126a2565b9250612714602085016126a2565b9150604084013590509250925092565b6000806040838503121561273757600080fd5b82359150612747602084016126a2565b90509250929050565b60006020828403121561276257600080fd5b610c79826126a2565b6000806040838503121561277e57600080fd5b50508035926020909101359150565b600080604083850312156127a057600080fd5b6127a9836126a2565b9150602083013580151581146127be57600080fd5b809150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000806000806080858703121561280e57600080fd5b612817856126a2565b9350612825602086016126a2565b925060408501359150606085013567ffffffffffffffff8082111561284957600080fd5b818701915087601f83011261285d57600080fd5b81358181111561286f5761286f6127c9565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156128b5576128b56127c9565b816040528281528a60208487010111156128ce57600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b6000806040838503121561290557600080fd5b61290e836126a2565b9150602083013563ffffffff811681146127be57600080fd5b6000806040838503121561293a57600080fd5b612943836126a2565b9150612747602084016126a2565b600181811c9082168061296557607f821691505b6020821081141561299f577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600083516129e6818460208801612600565b8351908301906129fa818360208801612600565b01949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600082821015612a4457612a44612a03565b500390565b60008219821115612a5c57612a5c612a03565b500190565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415612a9357612a93612a03565b5060010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b600082612ad857612ad8612a9a565b500490565b600082612aec57612aec612a9a565b500690565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000815260008351612b29816017850160208801612600565b7f206973206d697373696e6720726f6c65200000000000000000000000000000006017918401918201528351612b66816028840160208801612600565b01602801949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b60006001600160a01b03808716835280861660208401525083604083015260806060830152612bd3608083018461262c565b9695505050505050565b600060208284031215612bef57600080fd5b8151610c79816125b5565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615612c3257612c32612a03565b500290565b600081612c4657612c46612a03565b507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019056fea26469706673582212200bcacce717a531f5447904ba237f25df82679c2bb4d6411537ea678c1245a59b64736f6c63430008090033a26469706673582212205635b6b0f1feb1896524fbca96231ccea89d8ba1c74757babe25ae65f48af29f64736f6c63430008090033",
		},
	}

	deployments = map[common.Hash]map[uint64][]deployable{
		params.OasysMainnetGenesisHash: {
			1:      deploy1,
			236160: deploy2,
		},
		params.OasysTestnetGenesisHash: {
			1:      deploy1,
			236160: deploy2,
		},
		otherNetwork: {
			1: deploy1,
			2: deploy2,
		},
	}
)

// StateDB is an interface of state.StateDB.
type StateDB interface {
	GetCode(addr common.Address) []byte
	SetCode(addr common.Address, code []byte)
	SetState(addr common.Address, key common.Hash, value common.Hash)
}

// Deploy oasys built-in contracts.
func Deploy(chainConfig *params.ChainConfig, state StateDB, block uint64) {
	if chainConfig == nil || chainConfig.Oasys == nil || state == nil {
		return
	}

	deploy, ok := deployments[GenesisHash]
	if !ok {
		deploy = deployments[otherNetwork]
	}

	if contracts, ok := deploy[block]; ok {
		for _, c := range contracts {
			c.deploy(state, block)
		}
	}
}

// deployable
type deployable interface {
	deploy(state StateDB, block uint64)
}

// contract
type contract struct {
	name    string
	address string
}

// deployment
type deployment struct {
	contract   *contract
	code       string
	storageMap map[string]interface{}
}

// Deploy the contract.
func (c *deployment) deploy(state StateDB, block uint64) {
	address := common.HexToAddress(c.contract.address)

	bytecode, err := c.hexcode()
	if err != nil {
		panic(fmt.Errorf("failed to decode %s contract code: %s", c.contract.name, err.Error()))
	}
	storage, err := c.storage()
	if err != nil {
		panic(fmt.Errorf("failed to create %s contract storage map: %s", c.contract.name, err.Error()))
	}

	state.SetCode(address, bytecode)
	for key, val := range storage {
		state.SetState(address, key, val)
	}
	log.Info("Deploy contract", "block", block, "name", c.contract.name, "address", c.contract.address)
}

// Returns the contract byte codes.
func (c *deployment) hexcode() ([]byte, error) {
	bytecode, err := hex.DecodeString(strings.TrimPrefix(c.code, hexPrefix))
	if err != nil {
		return nil, err
	}
	return bytecode, nil
}

// Returns the contract storage slot map.
// see: https://docs.soliditylang.org/en/v0.8.11/internals/layout_in_storage.html
func (c *deployment) storage() (map[common.Hash]common.Hash, error) {
	storage := make(map[common.Hash]common.Hash)

	if c.storageMap != nil {
		for key, val := range c.storageMap {
			slot := common.HexToHash(key)
			switch t := val.(type) {
			case common.Hash:
				storage[slot] = t
			case common.Address:
				storage[slot] = t.Hash()
			case *big.Int:
				storage[slot] = common.BigToHash(t)
			case string:
				isHex := strings.HasPrefix(t, hexPrefix)
				if isHex {
					t = strings.TrimPrefix(t, hexPrefix)
				} else {
					t = hex.EncodeToString([]byte(t))
				}

				if isHex && len(t) <= storageSlotSize {
					storage[slot] = common.HexToHash(t)
				} else if len(t) < storageSlotSize {
					ends := strconv.FormatInt(int64(len(t)), 16)
					storage[slot] = common.HexToHash(rightZeroPad(t, 62) + leftZeroPad(ends, 2))
				} else {
					storage[slot] = common.BigToHash(big.NewInt(int64(len(t) + 1)))
					chunkStartPos := crypto.Keccak256Hash(slot.Bytes()).Big()
					for i, chunk := range toChunks(t, storageSlotSize) {
						chunkSlot := common.BigToHash(new(big.Int).Add(chunkStartPos, big.NewInt(int64(i))))
						storage[chunkSlot] = common.HexToHash(chunk)
					}
				}
			default:
				return nil, fmt.Errorf("unsupported type: %s, key: %s", t, key)
			}
		}
	}

	return storage, nil
}

// Returns the copied instance.
func (c *deployment) copy() *deployment {
	cpy := &deployment{
		contract:   c.contract,
		code:       c.code,
		storageMap: make(map[string]interface{}),
	}
	for key, value := range c.storageMap {
		cpy.storageMap[key] = value
	}
	return cpy
}

func toChunks(s string, l int) []string {
	slen := len(s)
	chunks := make([]string, 0)
	for i := 0; i < slen; i += l {
		end := i + l
		if end > slen {
			end = slen
		}
		slice := s[i:end]
		chunks = append(chunks, rightZeroPad(slice, l))
	}
	return chunks
}

func rightZeroPad(s string, l int) string {
	return s + strings.Repeat("0", l-len(s))
}

func leftZeroPad(s string, l int) string {
	return strings.Repeat("0", l-len(s)) + s
}
